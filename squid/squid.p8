pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	make_player()
	draw_player()
	draw_map()
end

function _update()
	move_player()
end

function _draw()
	draw_map()
	draw_player()
	

end
-->8
function make_player()
player = {}
player.x =120
player.y =120
player.dx =0
player.dy =0
player.sprite =2

end

function move_player()
	//print(collisions(player.x, player.y))


	if(btn(0) and not collisionl(player.x, player.y)) then
		player.x -=1
	end
	
	if(btn(1) and not collisionr(player.x,player.y)) then
		player.x +=1
	end
	
	if(btn(2) and not collisiont(player.x,player.y)) then
		player.y -=1
	end
	
	if(btn(3) and not collisionb(player.x,player.y)) then
		player.y += 1
	end
end

function draw_player()

	spr(player.sprite, player.x, player.y)

end

function draw_map()
	map(0,0,0,0,127,127)

end

function collisionl(posx, posy)
	
	local lceltop = false
	local lcelbot = false

	if(posx % 8 == 0) then
	 lceltop =fget(mget((posx/8)-1, (posy-posy%8)/8), 0)	
	 lcelbot =fget(mget((posx/8)-1, (posy+8-posy%8)/8), 0)
	end
	
	if(posy%8 == 0) then
		lcelbot = false
	end
	
	return lceltop or lcelbot
end

function collisionr(posx, posy)
	
	
	local rceltop = false
 local rcelbot = false
 
	if(posx % 8 == 0) then
	 rceltop =fget(mget((posx/8)+1, (posy-posy%8)/8), 0)
	 rcelbot =fget(mget((posx/8)+1, (posy+8-posy%8)/8), 0)
	end
	
	if(posy%8 == 0) then
		rcelbot = false
	end
	
	return rceltop or rcelbot
end

function collisiont(posx, posy)
	
	local tcellef = false
	local tcelrig = false

	
	if(posy % 8 == 0) then
		tcellef =fget(mget(((posx-posx%8)/8),(posy/8)-1),0)
		tcelrig =fget(mget(((posx+8-posx%8)/8),(posy/8)-1),0)
	end
	
	if(posx%8 == 0) then
		tcelrig = false
	end
	
	return tcellef or tcelrig
end

function collisionb(posx, posy)
	
	local bcellef = false
	local bcelrig = false
	
	if(posy % 8 == 0) then
	bcellef =fget(mget(((posx-posx%8)/8),(posy/8)+1),0)
	bcelrig =fget(mget(((posx+8-posx%8)/8),(posy/8)+1),0)
	end
	
	if(posx%8 == 0) then
		bcelrig = false
	end
	
	return bcellef or bcelrig
end
__gfx__
00000000111111110000000011111111222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001111cc11000cc00011111111222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700111ccc1100cccc0011111111ff2222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000111c1cc1007cc70011111111ffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700011cc11c10c0cc0c01111111122ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070011c111c10cccccc01111111122ff22220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011ccccc100c00c0011111111222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001111111100c00c0011111111222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0403030303030303040303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030303030303040303030103010303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030103030303040404030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030303010303030304040303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403010303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030303030303030303040303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040403030303030304040303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030404040403040403030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
